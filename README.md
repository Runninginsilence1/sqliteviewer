# sqliteviewer

一个可执行的 SQLite 可视化工具，后端使用 Go+gin，前端使用 Vue3，支持在服务器上部署并通过浏览器查看／编辑 SQLite 数据。

## 功能特性

### 核心功能
- 通过 `-db` 指定任意 SQLite 数据库文件并启动内置 HTTP 服务
- 自动嵌入前端资源，开箱即用（可选 `-static` 覆盖自定义前端目录）
- 使用纯 Go SQLite 驱动（modernc.org/sqlite），无需 CGO，跨平台编译简单

### 数据管理
- **表浏览**：列出所有用户表，分页查看表数据
- **数据搜索**：支持在所有列中搜索数据，实时过滤
- **数据排序**：点击表头列名进行升序/降序排序
- **行级操作**：新增、编辑、删除数据行
- **数据导出**：导出表数据为 `CSV / JSON / SQL` 格式

### SQL 查询
- **SQL 编辑器**：执行任意 SQL 查询（SELECT、INSERT、UPDATE、DELETE 等）
- **查询结果展示**：以表格形式展示 SELECT 查询结果
- **写操作反馈**：显示 INSERT/UPDATE/DELETE 的影响行数和最后插入 ID
- **查询历史**：自动保存最近 10 条查询历史，方便重复执行

### 表结构
- **结构查看**：查看表的完整 CREATE TABLE 语句
- **列信息**：显示列名、类型、非空约束、主键、默认值等详细信息
- **索引信息**：查看表的所有索引及其定义

### 界面特性
- **标签页系统**：数据、结构、SQL 查询三个标签页，功能清晰分离
- **现代化 UI**：美观的界面设计，响应式布局
- **实时反馈**：操作状态提示、错误信息展示

## 运行要求

- Go 1.21+（模块中声明的是 1.25，但向下兼容 1.21即可）
- Node.js 18+ & pnpm 8+（仅在需要修改前端时）

## 本地开发

```bash
# 安装依赖
pnpm install --dir frontend

# 重新构建前端（输出到 internal/server/ui/dist 以便 Go embed）
pnpm --dir frontend build

# 运行后端
go run ./cmd/sqliteviewer -db /path/to/your.db
```

访问 `http://localhost:8080` 即可打开界面。

## 使用说明

### 数据标签页
- **查看数据**：从左侧选择表，右侧显示表数据
- **搜索数据**：在搜索框输入关键词，会在所有列中搜索匹配的数据
- **排序数据**：点击表头列名进行排序，再次点击切换升序/降序
- **编辑数据**：点击"编辑"按钮修改行数据，或点击"新增行"添加数据
- **删除数据**：点击"删除"按钮删除行（需确认）
- **导出数据**：使用工具栏的导出按钮，支持 CSV、JSON、SQL 格式

### 结构标签页
- 查看表的完整结构信息，包括：
  - CREATE TABLE 语句
  - 所有列的详细信息（类型、约束等）
  - 表的所有索引定义

### SQL 查询标签页
- **执行查询**：在编辑器中输入 SQL 语句，点击"执行查询"
- **查看结果**：SELECT 查询会以表格形式展示结果
- **写操作**：INSERT/UPDATE/DELETE 操作会显示影响的行数
- **查询历史**：鼠标悬停在"历史查询"按钮上，可以快速选择之前的查询

## 运行参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| `-db` | **必填**，SQLite 文件路径 | 无 |
| `-addr` | HTTP 服务监听地址 | `:8080` |
| `-static` | 可选，覆盖默认嵌入的前端目录 | 空（使用内置） |

示例：

```bash
sqliteviewer -db ./example.db
sqliteviewer -db ./example.db -addr 0.0.0.0:9000
sqliteviewer -db ./example.db -static ./frontend/dist
```

## 项目结构

```
cmd/sqliteviewer        程序入口、启动参数
internal/server         gin HTTP 服务、SQLite 操作、静态资源嵌入
frontend                Vue3 + Vite 前端项目
```

## 注意事项

### 数据操作限制
- 依赖 SQLite 隐式 `rowid` 进行编辑和删除；如果数据表使用 `WITHOUT ROWID`，暂不支持通过 UI 编辑，但可以通过 SQL 查询标签页执行 SQL 语句。
- SQL 查询支持所有 SQLite 支持的操作，但请注意：
  - 写操作（INSERT/UPDATE/DELETE）会直接修改数据库，请谨慎操作
  - 建议在执行写操作前，先使用 SELECT 查询确认数据

### 安全提示
- 后端未做鉴权，请勿直接暴露在不可信网络
- SQL 查询功能允许执行任意 SQL，请确保只有可信用户能够访问
- 建议在生产环境中添加反向代理和认证机制

## License

MIT (如需其他协议请自行修改)。

